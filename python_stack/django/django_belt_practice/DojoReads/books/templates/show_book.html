<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/bootstrap.css' %}">
    <title>Dojo Reads</title>
</head>

<body>
    <div class='container col-12'>

        <!-- Display Page Header -->
        <div class='row col-12 mt-2 border-bottom border-dark'>
            <h4 class='col-10'>Welcome, {{request.session.first_name}}</h4>
            <div class='col-2'>
                <a href="/books">Home</a> |
                <a href="/login/logout">Logout</a>
            </div>
        </div>

        <!-- Display Book title and author name -->
        <div class='col-12 mt-2'>
            <br>
            <h4>{{this_book.title}}</h4>
            <h6>Author: {{this_book.author.name}}</h6>
            <br>
        </div>

        <div class='row container col-12'>
            <div class='col-6'>
                <!-- Display reviews for the book here -->
                <h5 class='border-bottom border-dark'>Reviews:</h5>

                <div class='col-11'>
                    {% for review in this_book_reviews %}
                    {% load static %}
                    {% if review.rating == 1 %}
                    <span>Rating: </span><img height="15px" src="{% static 'images/1star.jpeg' %}" alt="1 star rating">
                    {% endif %}
                    {% if review.rating == 2 %}
                    <span>Rating: </span><img height="15px" src="{% static 'images/2stars.jpeg' %}" alt="2 star rating">
                    {% endif %}
                    {% if review.rating == 3 %}
                    <span>Rating: </span><img height="15px" src="{% static 'images/3stars.jpeg' %}" alt="3 star rating">
                    {% endif %}
                    {% if review.rating == 4 %}
                    <span>Rating: </span><img height="15px" src="{% static 'images/4stars.jpeg' %}" alt="4 star rating">
                    {% endif %}
                    {% if review.rating == 5 %}
                    <span>Rating: </span><img height="15px" src="{% static 'images/5stars.jpeg' %}" alt="5 star rating">
                    {% endif %}

                    <p class='m-0'><a href="/books/show_user/{{review.user.id}}">{{review.user.first_name}}</a> says:
                        <em>{{review.text}}</em></p>
                    {% if review.user.id == request.session.userid %}
                    <p class='m-0'><a href="/books/delete_review/{{review.id}}">Delete my review</a></p>
                    {% endif %}
                    <p class='m-0 border-bottom border-dark'><em>Posted On: {{review.created_at}}</em></p>
                    {% endfor%}
                </div>
            </div>

            <!-- Add a review to this book -->
            <div class='col-6'>
                <h5>Add a review for this Book:</h5>
                <form action="/books/{{this_book.id}}/add_review" method="post">
                    {% csrf_token %}
                    <!-- <label for="review">Add a Review</label><br> -->
                    <textarea name="review" id="review" cols="50" rows="10" placeholder="Enter a review"
                        style="resize: none;"></textarea><br><br>
                    <label for="rating">Rating</label>
                    <select name="rating" id="rating">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select><span> stars</span><br><br>
                    <input class="btn btn-primary" type="submit" value="Add Book and Review">
                </form>
            </div>

        </div>
    </div>
</body>

</html>